{% extends "admin/base.html" %}

{% block admincontent %}
    <!-- main body -->
    <div class="content">
        <div>
            <h2 class="pagetitle">Assess List</h2>
            <table id="assesstable">
                <thead>
                    <th>Topic</th>
                    <th>Title</th>
                    <th>Date</th>
                    <th>User Name</th>
                    <th colspan="3">Action</th>
                </thead>
                <tbody>
                    <tr>
                        <td>Python</td>
                        <td>Python List</td>
                        <td>03/04/2019</td>
                        <td>Mike</td>
                        <td><button type="button" name="assess" class="assess" onclick="location.href='./responses.html'">Assess</button></td>
                    </tr>
                    <tr>
                        <td>C++</td>
                        <td>C++ List</td>
                        <td>05/03/2010</td>
                        <td>Jake</td>
                        <td><button type="button" name="assess" class="assess" onclick="location.href='./responses.html'">Assess</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}

{% block jsfiles %}
    <script>
        //sort table
        $('th').click(function(){
        var table = $(this).parents('table').eq(0)
        var rows = table.find('tr:gt(0)').toArray().sort(comparer($(this).index()))
        this.asc = !this.asc
        if (!this.asc){rows = rows.reverse()}
        for (var i = 0; i < rows.length; i++){table.append(rows[i])}
        })
        function comparer(index) {
            return function(a, b) {
                var valA = getCellValue(a, index), valB = getCellValue(b, index)
                return $.isNumeric(valA) && $.isNumeric(valB) ? valA - valB : valA.toString().localeCompare(valB)
            }
        }
        function getCellValue(row, index){ return $(row).children('td').eq(index).text() }
    </script>
    {{ super() }}
{% endblock %}